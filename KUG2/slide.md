## Go初めて2ヶ月くらいの初心者がソシャゲっぽいのを作ってみた(仮

---

## お前だれよ？

![俺だよ](images/profile.jpg "俺だよ")

* HN：しょーさ [(syo_sa1982)](http://twitter.com/syo_sa1982)
* 本名：藤井陽介
* DeNA Games Osaka
* 元ぺちぱーで今はWebフロントエンドメイン
* Go歴は初心者に毛が生えた程度
* 仕事でGo書きたい(願望

---

## 今日のお題
UnityとGoでなんちゃってソシャゲアプリを作った時に  
(今も作ってるけど)  
やったことと疑問に思ったことを  
適当にしゃべります。

---

## アプリの概要とか
* クライアント側はUnity
    * 一応スマホで動かすこと前提
* Goでサーバー側の処理
    * httpでリクエスト受け取ってjsonで返すだけ
    * ゲームロジックも基本サーバーで
        * 戦闘画面とかだとクライアント側で処理？
    * 使ってるライブラリはgojiとgorm
    
---

## やったこと
* ユーザー登録からキャラ作成まで
    * Unity側でUUIDを発行してユーザー認証/登録
    * Goで乱数を生成してキャラのステータスを生成
    * それをjsonでhttp通信使って送信
    * Unity側で決定して初めてDBに保存される

---

## 感想
* ぱっと見Cっぽいけど、割りと手軽に書けると思った(小並感
* Classが無かったり、型名が後ろだったり戸惑うことは有ったけど、慣れると気にならなくなる
    * 継承も無いけど、構造体を入れ子にすることで代用すればいいかな。
* goji使ってるけどルーティングにしか使ってないし、別にgoji要らんかったんじゃないかって気がしてる。


---

## 疑問点とか
* Unity側でUUID生成してサーバーに保存してるけど、セキュリティ対策とかどうしてるんだろう？
    * 送受信前に暗号化/復号くらいしか思いつかなかった
    
* jsonをUnity側に投げる時、基本mapを使って必要に応じて(※)struct使ってるけど、最初からAPI返す為のstruct作った方が良いのか？
    * ※)例えば型の違うmapを複数送信したい時とか
      
* Unityから送信する時にWWWFormクラスを使ってるけど、stringでしか送信できないっぽいので、他にいい方法無いか？
    * これGoの疑問じゃないというのはさておき…

---

## 今後やること
* そろそろサーバとか借りて、アプリも実機で見れるようにしたい。
    * GAEにするかさくらにするかで迷ってる
* goroutine活用できてないので、処理重くなりそうな所には使っていきたい
* 肝心なゲームサイクルまだ考えて無かったので、何か考える
    * 場合によってはTCP通信要るかも？

---

## 最後にどうでもいい話

---

## ご静聴ありがとうございました


